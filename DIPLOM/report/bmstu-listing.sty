%% bmstu_listing.sty
%% Copyright 2023 Mikael Novikov
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
%
% This work has the LPPL maintenance status `maintained'.
%
% The Current Maintainer of this work is Mikael Novikov.
%
% This work consists of all files listed in manifest.txt.

% Настройка листингов
\RequirePackage{listings}
\RequirePackage{listingsutf8}
\lstset{
	inputencoding=utf8/koi8-r,
	basicstyle=\small\ttfamily,
	rulecolor=\color{black},
	escapeinside={\%*}{*)},
	breaklines=true,
	breakatwhitespace=true,
	tabsize=4,
	showstringspaces=false,
	float=h!,
	abovecaptionskip=-5pt,
}

% Команда создания простого листинга
\newcommand{\includelisting}[2]
{
	\lstinputlisting[
		frame=single,
		caption={#2},
		label={lst:#1},
	]{inc/lst/#1}
}

\definecolor{numbers}{rgb}{0.5, 0.5, 0.5}
\definecolor{keywords}{rgb}{0.13, 0.13, 1}
\definecolor{comments}{rgb}{0, 0.5, 0}
\definecolor{strings}{rgb}{0.9, 0, 0}

% Команда создания листинга с подсветкой синтаксиса и нумерацией строк
\newcommand{\includelistingpretty}[3]
{
	\lstinputlisting[
		language={#2},
		keywordstyle=\color{keywords},
		stringstyle=\color{strings},
		commentstyle=\color{comments},
		frame=leftline,
		numbers=left,
		numberstyle=\footnotesize\color{numbers},
		caption={#3},
		label={lst:#1},
	]{inc/lst/#1}
}